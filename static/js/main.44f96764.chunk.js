(this["webpackJsonpmedium-clone"]=this["webpackJsonpmedium-clone"]||[]).push([[0],{26:function(e,t,a){e.exports=a(53)},39:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),s=a.n(c),l=a(7),o=a(9),i=(a(31),a(1)),m=a(24),u=a.n(m),d=Object(o.a)(),f=Object(n.createContext)({isLoggedIn:!1,logOut:function(){}}),p=function(e){var t=Object(n.useState)(localStorage.getItem("token")),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),m=o[0],p=o[1],b=Object(n.useState)(JSON.parse(localStorage.getItem("user"))),v=Object(i.a)(b,2),E=v[0],h=v[1],g=Object(n.useState)(""),j=Object(i.a)(g,2),O=j[0],N=j[1],k=function(e){if(e){p(!0),s(e),localStorage.setItem("token",e);var t=u()(e).username;N(t)}};Object(n.useEffect)((function(){localStorage.getItem("token")&&k(localStorage.getItem("token"))}),[c]);var y={isLoggedIn:m,logout:function(){p(!1),s(null),N(""),h(null),localStorage.removeItem("token"),localStorage.removeItem("user"),d.push("/home")},setAuth:k,user:E,setUser:h,username:O,setUsername:N,token:c};return r.a.createElement(f.Provider,{value:y},e.children)},b=function(e){return e.isLoggedIn?r.a.createElement(l.b,e):r.a.createElement(l.a,{to:"/login"})},v=a(4),E=(a(39),function(){var e=Object(n.useContext)(f),t=e.isLoggedIn,a=e.logout,c=e.user;return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement(v.a,{className:"navbar-brand",to:"/"},"Medium Clone"),r.a.createElement("div",null,t?r.a.createElement("ul",{className:"nav navbar-nav pull-right",style:{display:"inherit"}},r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(v.a,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(v.a,{className:"nav-link",to:"/settings"},"Settings")),r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(v.a,{className:"nav-link",to:"/editor"},"New Article")),c&&c.username&&r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(v.a,{className:"nav-link",to:"/user/".concat(c.username)},c.username)),r.a.createElement("li",{className:"nav-item d-inline-block items",onClick:a},r.a.createElement(v.a,{className:"nav-link",to:"/login"},"Log Out"))):r.a.createElement("ul",{className:"nav navbar-nav pull-right",style:{display:"inherit"}},r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(v.a,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(v.a,{className:"nav-link",to:"/login"},"Sign in")),r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(v.a,{className:"nav-link",to:"/register"},"Sign up"))))))}),h=a(3),g=a.n(h),j=a(13),O=a(5),N=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,k="https://conduit.productionready.io/api/articles/feed?limit=10&offset=0",y="https://conduit.productionready.io/api/articles",x="https://conduit.productionready.io/api/articles",w=a(16),S=a.n(w),C=(a(42),function(e){var t=e.articles,a=e.toggleFavorite;return r.a.createElement("div",{className:"articles-list"},t&&t.length?t.map((function(e){return r.a.createElement("div",{key:e.slug,className:"article text-left"},r.a.createElement("div",{className:"article-info"},r.a.createElement(v.a,{to:"/user/".concat(e.author.username)},r.a.createElement("img",{src:e.author.image,className:"user-avatar",alt:e.author.username})),r.a.createElement("div",{className:"info"},r.a.createElement(v.a,{to:"/user/".concat(e.author.username),className:"article-author"},e.author.username),r.a.createElement("div",{className:"posted-date"},S()(e.createdAt).format("MMMM D, YYYY"))),r.a.createElement("button",{className:"btn float-right ".concat(e.favorited?"btn-success":"favorite-btn-style"),onClick:function(){return a(e.slug)}},"".concat(e.favorited?"Unfavorite":"Favorite"," (").concat(e.favoritesCount,")"))),r.a.createElement(v.a,{to:"/article/".concat(e.slug)},r.a.createElement("h2",null,e.title),r.a.createElement("p",null,e.body.substr(0,100)),r.a.createElement("div",null,"Read more...."),r.a.createElement("div",{className:"article-tags text-right"},e.tagList&&e.tagList.map((function(e){return r.a.createElement("div",{key:e,className:"article-tag"},e)})))))})):null,t&&0===t.length?r.a.createElement("div",{className:"no-articles-yet"},"No Articles yet"):null)}),T=(a(43),function(e){var t=e.activePage,a=e.itemsPerPage,n=e.totalPageCount,c=e.setActivePage;return r.a.createElement("nav",null,Math.ceil(n/a)<=1?null:r.a.createElement("ul",{className:"pagination pagination-md flex-wrap"},function(){for(var e=[],s=function(a){e.push(r.a.createElement("li",{class:"page-item ".concat(t===a?"active":""),onClick:function(){return c(a)}},r.a.createElement("button",{className:"btn page-btn page-link"},a)))},l=1;l<=Math.ceil(n/a);l++)s(l);return e}()))}),P=(a(44),function(){return r.a.createElement("div",{class:"spinner-border text-primary loader",role:"status"},r.a.createElement("span",{class:"sr-only"},"Loading..."))}),L=(a(45),function(){var e=Object(n.useContext)(f),t=e.isLoggedIn,a=e.token,c=Object(l.g)(),s=Object(n.useState)(t?k:"".concat(y,"?limit=").concat(10,"&offset=0")),o=Object(i.a)(s,2),m=o[0],u=o[1],d=new URL(m),p=Object(n.useState)(!1),b=Object(i.a)(p,2),v=b[0],E=b[1],h=Object(n.useState)(null),N=Object(i.a)(h,2),w=N[0],S=N[1],L=Object(n.useState)(null),A=Object(i.a)(L,2),U=A[0],I=A[1],F=Object(n.useState)(null),M=Object(i.a)(F,2),D=M[0],z=M[1],Y=Object(n.useState)(1),J=Object(i.a)(Y,2),R=J[0],G=J[1],W=Object(n.useState)(t?"your-articles":"all-articles"),H=Object(i.a)(W,2),Z=H[0],B=H[1],$=Object(n.useState)(null),q=Object(i.a)($,2),K=q[0],Q=q[1],V=function(){var e=Object(O.a)(g.a.mark((function e(n){var r,s,l,o,i,m,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="".concat(x,"/").concat(n,"/favorite"),t){e.next=5;break}c.push("/login?destination="+window.location.pathname),e.next=17;break;case 5:return s=w&&w.length&&w.filter((function(e){return e.slug===n}))[0],l=w&&w.length&&w.findIndex((function(e){return e.slug===n})),e.next=9,fetch("".concat(r),{headers:{"Content-Type":"application/json;charset=UTF-8",authorization:"Token ".concat(a)},method:s.favorited?"DELETE":"POST"});case 9:return o=e.sent,e.next=12,o.json();case 12:i=e.sent,m=i.article,(u=Object(j.a)(w))[l]=m,S(u);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(O.a)(g.a.mark((function e(){var t,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://conduit.productionready.io/api/tags");case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:a=e.sent,n=a.tags,z(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){(function(){var e=Object(O.a)(g.a.mark((function e(){var n,r,c,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(null),E(!0),e.next=4,fetch(m,{headers:t||localStorage.getItem("token")?{"Content-Type":"application/json;charset=UTF-8",authorization:"Token ".concat(a)}:{}});case 4:if(!(n=e.sent).ok){e.next=13;break}return e.next=8,n.json();case 8:r=e.sent,c=r.articles,s=r.articlesCount,S(c),I(s);case 13:E(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[m,a,t,R]),r.a.createElement("div",{className:"home text-center"},r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"py-3"},"Medium Clone"),r.a.createElement("p",null,"Create and share awesome articles, like them, add them as favorite, comment on them..."))),r.a.createElement("div",{className:"container articles-and-tags"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"article-tabs"},r.a.createElement("ul",{className:"nav nav-tabs"},t&&r.a.createElement("li",{className:"nav-item all-articles",onClick:function(){B("your-articles"),Q(null),S(null),u(k)}},r.a.createElement("button",{id:"all",className:"nav-link ".concat(t&&"your-articles"===Z?"active":"")},"Your Articles")),r.a.createElement("li",{className:"nav-item all-articles",onClick:function(){B("all-articles"),Q(null),S(null),u("".concat(y,"?limit=").concat(10,"&offset=0"))}},r.a.createElement("button",{id:"all",className:"nav-link ".concat("all-articles"===Z?"active":"")},"All Articles")),K&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"nav-link ".concat("tag-articles"===Z?"active":"")},"#".concat(K)))),r.a.createElement("div",{className:"articles-list"},!v&&w&&w.length?r.a.createElement(C,{articles:w,toggleFavorite:V,totalArticles:U}):null,!v&&r.a.createElement(T,{itemsPerPage:10,totalPageCount:U,activePage:R,setActivePage:function(e){d.searchParams.set("offset",10*(e-1)),u(d.href),G(e)}}),v&&r.a.createElement(P,null)),w&&0===w.length?r.a.createElement("div",{className:"no-articles-yet"},"No Articles yet."):null)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"popular-tags"},r.a.createElement("p",null,"Popular Tags"),r.a.createElement("div",{className:"tags"},D&&D.map((function(e){return r.a.createElement("div",{key:e,className:"tag",onClick:function(){return function(e){B("tag-articles"),Q(e),S(null),d.searchParams.has("tag")?d.searchParams.set("tag",e):d.searchParams.append("tag",e),u(d.href)}(e)}},e)}))))))))}),A=a(2),U=(a(46),function(){var e=Object(l.g)(),t=Object(l.h)().slug,a=Object(n.useContext)(f),c=a.isLoggedIn,s=a.token,o=a.username,m="".concat(x,"/").concat(t),u=Object(n.useState)(null),d=Object(i.a)(u,2),p=d[0],b=d[1],E=Object(n.useState)(null),h=Object(i.a)(E,2),N=h[0],k=h[1],y=Object(n.useState)(""),w=Object(i.a)(y,2),C=w[0],T=w[1],P=function(){var t=Object(O.a)(g.a.mark((function t(){var a,n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=4;break}e.push("/login?destination="+window.location.pathname),t.next=20;break;case 4:if(a=null,!p.favorited){t.next=11;break}return t.next=8,fetch("".concat(m,"/favorite"),{headers:{"Content-Type":"application/json;charset=UTF-8",authorization:"Token ".concat(s)},method:"DELETE"});case 8:a=t.sent,t.next=14;break;case 11:return t.next=13,fetch("".concat(m,"/favorite"),{headers:{"Content-Type":"application/json;charset=UTF-8",authorization:"Token ".concat(s)},method:"POST"});case 13:a=t.sent;case 14:if(!a.ok){t.next=20;break}return t.next=17,a.json();case 17:n=t.sent,r=n.article,b(Object(A.a)(Object(A.a)({},p),r));case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=Object(O.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(m,{headers:{"Content-Type":"application/json;charset=UTF-8",authorization:"Token ".concat(s)},method:"DELETE"});case 2:t.sent.ok&&e.push("/");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=function(){var e=Object(O.a)(g.a.mark((function e(t){var a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!C){e.next=12;break}return e.next=4,fetch("".concat(m,"/comments"),{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8",authorization:"Token ".concat(s)},body:JSON.stringify({comment:{body:C}})});case 4:if(!(a=e.sent).ok){e.next=11;break}return e.next=8,a.json();case 8:n=e.sent,(r=n.comment)&&k([r].concat(Object(j.a)(N)));case 11:T("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=function(){var e=Object(O.a)(g.a.mark((function e(){var t,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(m,{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}});case 2:if((t=e.sent).ok){e.next=6;break}e.next=11;break;case 6:return e.next=8,t.json();case 8:a=e.sent,n=a.article,b(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(O.a)(g.a.mark((function e(){var t,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/comments"),{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}});case 2:if((t=e.sent).ok){e.next=6;break}e.next=11;break;case 6:return e.next=8,t.json();case 8:a=e.sent,n=a.comments,k(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[m]);var I=function(){return r.a.createElement("div",{className:"article-info"},r.a.createElement(v.a,{to:"/user/".concat(p.author.username)},r.a.createElement("img",{src:p.author.image,className:"user-avatar",alt:p.author.username})),r.a.createElement("div",{className:"info"},r.a.createElement(v.a,{to:"/user/".concat(p.author.username),className:"article-author"},p.author.username),r.a.createElement("div",{className:"posted-date"},S()(p.createdAt).format("MMMM D, YYYY"))),o!==p.author.username&&r.a.createElement("button",{className:"btn ".concat(p.favorited?"btn-success":"favorite-btn-style"),onClick:P},p.favorited?"Unfavorite Article (".concat(p.favoritesCount,")"):"Favorite Article (".concat(p.favoritesCount,")")),c&&o===p.author.username&&r.a.createElement("span",{className:"can-edit-delete"},r.a.createElement(v.a,{to:"/editor/".concat(t)},r.a.createElement("button",{className:"btn btn-secondary"},"Edit Article")),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return L()}},"Delete Article")))};return r.a.createElement("div",{className:"article-page"},r.a.createElement("div",{className:"article-banner"},p&&r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,p.title),I())),p&&r.a.createElement("div",{className:"container article-detail"},r.a.createElement("div",{className:"article-content"},r.a.createElement("p",null,p.body),r.a.createElement("div",{className:"article-content-tags"},p.tagList&&p.tagList.map((function(e){return r.a.createElement("div",{key:e,className:"article-content-tag"},e)}))))),r.a.createElement("hr",{className:"hr-line"}),p&&r.a.createElement("div",{className:"article-actions"},I()),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row comment-section"},r.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},c?r.a.createElement("div",{className:"comment-form"},r.a.createElement("form",{onSubmit:U},r.a.createElement("div",{className:"content"},r.a.createElement("textarea",{rows:"3",value:C,onChange:function(e){return T(e.target.value)}})),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{className:"btn btn-sm btn-primary float-right"},"Post Comment")))):r.a.createElement("div",{className:"not-logged-in"},r.a.createElement("p",null,r.a.createElement(v.a,{to:"/login"},"Sign In")," or ",r.a.createElement(v.a,{to:"/register"},"Sign up")," to add comments on this article.")),N&&N.map((function(e){return r.a.createElement("div",{key:e.id,className:"comment"},r.a.createElement("div",{className:"comment-content"},r.a.createElement("p",null,e.body)),r.a.createElement("div",{className:"comment-footer"},r.a.createElement("div",{className:"comment-meta"},r.a.createElement(v.a,{to:"/user/".concat(e.author.username)},r.a.createElement("img",{src:e.author.image,alt:e.author.username}),e.author.username),r.a.createElement("span",null,S()(e.author.createdAt).format("MMMM D, YYYY")))))}))))))}),I=a(6),F=(a(47),r.a.memo((function(){var e=Object(n.useContext)(f),t=e.isLoggedIn,a=e.setAuth,c=e.setUser,s=Object(n.useState)(""),o=Object(i.a)(s,2),m=o[0],u=o[1],d=Object(n.useState)(""),p=Object(i.a)(d,2),b=p[0],E=p[1],h=Object(n.useState)({email:"",password:""}),j=Object(i.a)(h,2),k=j[0],y=j[1],x=Object(n.useState)(null),w=Object(i.a)(x,2),S=w[0],C=w[1],T=function(e){var t=e.target,a=t.name,n=t.value;"email"===a&&(n?n&&(N.test(n)?y(Object(A.a)(Object(A.a)({},k),{},Object(I.a)({},a,""))):y(Object(A.a)(Object(A.a)({},k),{},Object(I.a)({},a,"Please enter a valid email address")))):y(Object(A.a)(Object(A.a)({},k),{},Object(I.a)({},a,"Please enter your email"))),u(n)),"password"===a&&(y(n?Object(A.a)(Object(A.a)({},k),{},Object(I.a)({},a,"")):Object(A.a)(Object(A.a)({},k),{},Object(I.a)({},a,"Please enter the password"))),E(n))},P=function(){var e=Object(O.a)(g.a.mark((function e(t){var n,r,s,l,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(null),t.preventDefault(),e.next=4,fetch("https://conduit.productionready.io/api/users/login",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({user:{email:m,password:b}})});case 4:if((n=e.sent).ok){e.next=13;break}return e.next=8,n.json();case 8:r=e.sent,s=r.errors,C(s),e.next=20;break;case 13:return e.next=15,n.json();case 15:l=e.sent,o=l.user,a(o.token),c(o),localStorage.setItem("user",JSON.stringify(o));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",{className:"container fluid login-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-center"},"Sign in"),r.a.createElement("div",{className:"text-center"},r.a.createElement(v.a,{to:"/register"},"Need Account?")),r.a.createElement("form",{onSubmit:P},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",value:m,onChange:T}),k.email&&r.a.createElement("div",{className:"error"},k.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",className:"form-control",value:b,onChange:T}),k.password&&r.a.createElement("div",{className:"error"},k.password)),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!(m&&b&&N.test(m))},"Sign In"),S&&Object.keys(S).map((function(e){return r.a.createElement("div",{className:"error",key:e},"".concat(e," ").concat(S[e]))}))))))}))),M=(a(48),r.a.memo((function(){var e=Object(n.useContext)(f).setAuth,t=Object(n.useState)({username:"",email:"",password:""}),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)({username:"",email:"",password:""}),o=Object(i.a)(l,2),m=o[0],u=o[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),b=p[0],E=p[1],h=function(e){var t=e.target,a=t.name,n=t.value;"email"===a&&(n?n&&(N.test(n)?u(Object(A.a)(Object(A.a)({},m),{},Object(I.a)({},a,""))):u(Object(A.a)(Object(A.a)({},m),{},Object(I.a)({},a,"Please enter a valid email address")))):u(Object(A.a)(Object(A.a)({},m),{},Object(I.a)({},a,"Please enter your email")))),"username"===a&&u(n?Object(A.a)(Object(A.a)({},m),{},Object(I.a)({},a,"")):Object(A.a)(Object(A.a)({},m),{},Object(I.a)({},a,"Please enter your username"))),"password"===a&&u(n?Object(A.a)(Object(A.a)({},m),{},Object(I.a)({},a,"")):Object(A.a)(Object(A.a)({},m),{},Object(I.a)({},a,"Please enter the password"))),s(Object(A.a)(Object(A.a)({},c),{},Object(I.a)({},a,n)))},j=function(){var t=Object(O.a)(g.a.mark((function t(a){var n,r,s,l,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(null),a.preventDefault(),t.next=4,fetch("https://conduit.productionready.io/api/users",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({user:Object(A.a)({},c)})});case 4:if((n=t.sent).ok){t.next=14;break}return t.next=8,n.json();case 8:r=t.sent,s=r.errors,console.log(s),E(s),t.next=19;break;case 14:return t.next=16,n.json();case 16:l=t.sent,o=l.user.token,e(o);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"container fluid register-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-center"},"Register"),r.a.createElement("div",{className:"text-center"},r.a.createElement(v.a,{to:"/login"},"Already have an account?")),r.a.createElement("form",{onSubmit:j},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"User Name"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:c.username,onChange:h}),m.username&&r.a.createElement("div",{className:"error"},m.username)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",name:"email",value:c.email,onChange:h}),m.email&&r.a.createElement("div",{className:"error"},m.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:c.password,onChange:h}),m.password&&r.a.createElement("div",{className:"error"},m.password)),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:function(){var e=c.username,t=c.email,a=c.password;if(!e||!t||!a)return!0}()},"Register"),b&&Object.keys(b).map((function(e){return r.a.createElement("div",{className:"error",key:e},"".concat(e," ").concat(b[e]))}))))))}))),D=(a(49),function(){var e=Object(l.h)().username,t=Object(l.g)(),a=Object(n.useContext)(f),c=a.isLoggedIn,s=a.token,o=Object(n.useState)("".concat(y,"?author=").concat(e,"&limit=").concat(5,"&offset=0")),m=Object(i.a)(o,2),u=m[0],d=m[1],p=new URL(u),b=Object(n.useState)(null),v=Object(i.a)(b,2),E=v[0],h=v[1],N=Object(n.useState)(!1),k=Object(i.a)(N,2),w=k[0],S=k[1],L=Object(n.useState)(null),A=Object(i.a)(L,2),U=A[0],I=A[1],F=Object(n.useState)(null),M=Object(i.a)(F,2),D=M[0],z=M[1],Y=Object(n.useState)("my-articles"),J=Object(i.a)(Y,2),R=J[0],G=J[1],W=Object(n.useState)(1),H=Object(i.a)(W,2),Z=H[0],B=H[1],$=function(t){G(t),"my-articles"===t?(p.searchParams.delete("favorited"),p.searchParams.set("author",e)):"fav-articles"===t&&(p.searchParams.delete("author"),p.searchParams.set("favorited",e)),d(p.href)},q=function(){var e=Object(O.a)(g.a.mark((function e(a){var n,r,l,o,i,m,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="".concat(x,"/").concat(a,"/favorite"),c){e.next=5;break}t.push("/login?destination="+window.location.pathname),e.next=17;break;case 5:return r=U&&U.length&&U.filter((function(e){return e.slug===a}))[0],l=U&&U.length&&U.findIndex((function(e){return e.slug===a})),e.next=9,fetch("".concat(n),{headers:{"Content-Type":"application/json;charset=UTF-8",authorization:"Token ".concat(s)},method:r.favorited?"DELETE":"POST"});case 9:return o=e.sent,e.next=12,o.json();case 12:i=e.sent,m=i.article,(u=Object(j.a)(U))[l]=m,I(u);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var t=function(){var t=Object(O.a)(g.a.mark((function t(){var a,n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I(null),t.next=3,fetch("".concat("https://conduit.productionready.io/api/profiles/","/").concat(e));case 3:if(!(a=t.sent).ok){t.next=10;break}return t.next=7,a.json();case 7:n=t.sent,r=n.profile,h(r);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();d("".concat(y,"?author=").concat(e,"&limit=10")),t()}),[e]),Object(n.useEffect)((function(){(function(){var e=Object(O.a)(g.a.mark((function e(){var t,a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(null),S(!0),e.next=4,fetch(u,{method:"GET",headers:c||localStorage.getItem("token")?{"Content-Type":"application/json;charset=UTF-8",authorization:"Token ".concat(s)}:{}});case 4:if(!(t=e.sent).ok){e.next=13;break}return e.next=8,t.json();case 8:a=e.sent,n=a.articles,r=a.articlesCount,I(n),z(r);case 13:S(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[u,c,s]),r.a.createElement("div",{className:"user-profile"},E&&r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},r.a.createElement("img",{src:E.image,alt:E.image}),r.a.createElement("h3",{className:"text-center mt-3"},e))))),r.a.createElement("div",{className:"user-articles"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},r.a.createElement("div",{className:"article-tabs"},r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item all-articles",onClick:function(){return $("my-articles")}},r.a.createElement("button",{id:"all",className:"nav-link ".concat("my-articles"===R?"active":"")},"My Articles")),r.a.createElement("li",{className:"nav-item fav-articles",onClick:function(){return $("fav-articles")}},r.a.createElement("button",{id:"all",className:"nav-link ".concat("fav-articles"===R?"active":"")},"Favorite Articles"))),r.a.createElement("div",{className:"articles-list text-center"},w&&r.a.createElement(P,null),r.a.createElement(C,{articles:U,toggleFavorite:q,totalArticles:D}),!w&&r.a.createElement(T,{itemsPerPage:5,totalPageCount:D,activePage:Z,setActivePage:function(e){p.searchParams.set("offset",5*(e-1)),d(p.href),B(e)}}))))))))}),z=(a(50),function(){var e=Object(n.useContext)(f),t=e.user,a=e.token,c=e.setAuth,s=e.setUser,l=Object(n.useState)({image:t.image,username:t.username,bio:t.bio,email:t.email,password:""}),o=Object(i.a)(l,2),m=o[0],u=o[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),b=p[0],v=p[1],E=Object(n.useState)(!1),h=Object(i.a)(E,2),j=h[0],N=h[1],k=function(e){var t=e.target,a=t.name,n=t.value;u(Object(A.a)(Object(A.a)({},m),{},Object(I.a)({},a,n)))},y=function(){var e=Object(O.a)(g.a.mark((function e(t){var n,r,l,o,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),N(!0),e.next=4,fetch("https://conduit.productionready.io/api/user",{method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8",authorization:"Token ".concat(a)},body:JSON.stringify(Object(A.a)({},m))});case 4:if((n=e.sent).ok){e.next=13;break}return e.next=8,n.json();case 8:r=e.sent,l=r.errors,v(l),e.next=20;break;case 13:return e.next=15,n.json();case 15:o=e.sent,i=o.user,c(i.token),s(i),localStorage.setItem("user",JSON.stringify(i));case 20:N(!1);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container fluid user-settings"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-center"},"User Settings"),r.a.createElement("form",{onSubmit:y},r.a.createElement("fieldset",{disabled:j},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"profilePic",placeholder:"URL of profile picture",value:m.image,onChange:k})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"username",placeholder:"Username",value:m.username,onChange:k})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",name:"username",placeholder:"Short bio about you",rows:"10",value:m.bio,onChange:k})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:"form-control",name:"email",placeholder:"Email",value:m.email,onChange:k})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",name:"password",placeholder:"New Password",value:m.password,onChange:k})),r.a.createElement("button",{type:"submit",className:"btn btn-primary float-right"},"Update Settings")),b&&Object.keys(b).map((function(e){return r.a.createElement("div",{className:"error",key:e},"".concat(e," ").concat(b[e]))}))))))}),Y=(a(51),function(){var e=Object(l.g)(),t=Object(n.useState)({title:"",description:"",body:"",tagList:""}),a=Object(i.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(!1),m=Object(i.a)(o,2),u=m[0],d=m[1],f=Object(n.useState)(null),p=Object(i.a)(f,2),b=p[0],v=p[1],E=function(e){var t=e.target,a=t.name,n=t.value;s(Object(A.a)(Object(A.a)({},c),{},Object(I.a)({},a,n)))},h=function(){var t=Object(O.a)(g.a.mark((function t(a){var n,r,s,l,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),v(null),d(!0),t.next=5,fetch(x,{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8",authorization:"Token ".concat(localStorage.getItem("token"))},body:JSON.stringify(Object(A.a)(Object(A.a)({},c),{},{tagList:c.tagList.split(",")}))});case 5:if((n=t.sent).ok){t.next=14;break}return t.next=9,n.json();case 9:r=t.sent,s=r.errors,v(s),t.next=19;break;case 14:return t.next=16,n.json();case 16:l=t.sent,(o=l.article).slug&&e.push("/article/".concat(o.slug));case 19:d(!1);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"container new-article"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},r.a.createElement("ul",null,b&&Object.keys(b).map((function(e){return r.a.createElement("li",{className:"error",key:e},b[e].map((function(t){return r.a.createElement("div",{key:t,className:"error"},"".concat(e," ").concat(t))})))}))),r.a.createElement("form",{onSubmit:h},r.a.createElement("fieldset",{disabled:u},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"title",placeholder:"Article Title",value:c.title,onChange:E})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"description",placeholder:"What's this article about?",value:c.description,onChange:E})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",name:"body",placeholder:"Write your article (in markdown)",rows:"10",value:c.body,onChange:E})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"tagList",placeholder:"Enter tags",value:c.tagList,onChange:E}))),r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary float-right",disabled:u},"Publish Article")))))}),J=function(){var e=Object(l.g)(),t=Object(l.h)().slug,a="".concat(x,"/").concat(t),c=Object(n.useState)({title:"",description:"",body:"",tagList:""}),s=Object(i.a)(c,2),o=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),f=d[0],p=d[1],b=Object(n.useState)(null),v=Object(i.a)(b,2),E=v[0],h=v[1],j=function(e){var t=e.target,a=t.name,n=t.value;m(Object(A.a)(Object(A.a)({},o),{},Object(I.a)({},a,n)))},N=function(){var t=Object(O.a)(g.a.mark((function t(n){var r,c,s,l,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),h(null),p(!0),t.next=5,fetch(a,{method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8",authorization:"Token ".concat(localStorage.getItem("token"))},body:JSON.stringify(Object(A.a)({},o))});case 5:if((r=t.sent).ok){t.next=14;break}return t.next=9,r.json();case 9:c=t.sent,s=c.errors,h(s),t.next=19;break;case 14:return t.next=16,r.json();case 16:l=t.sent,(i=l.article).slug&&e.push("/article/".concat(i.slug));case 19:p(!1);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(O.a)(g.a.mark((function e(){var t,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a,{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}});case 2:if((t=e.sent).ok){e.next=6;break}e.next=11;break;case 6:return e.next=8,t.json();case 8:n=e.sent,r=n.article,m((function(e){return Object(A.a)(Object(A.a)({},e),{},{title:r.title,body:r.body,description:r.description,tagList:r.tagList})}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]),r.a.createElement("div",{className:"container new-article"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},r.a.createElement("ul",null,E&&Object.keys(E).map((function(e){return r.a.createElement("li",{className:"error",key:e},E[e].map((function(t){return r.a.createElement("div",{className:"error"},"".concat(e," ").concat(t))})))}))),r.a.createElement("form",{onSubmit:N},r.a.createElement("fieldset",{disabled:f},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"title",placeholder:"Article Title",value:o.title,onChange:j})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"description",placeholder:"What's this article about?",value:o.description,onChange:j})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",name:"body",placeholder:"Write your article (in markdown)",rows:"10",value:o.body,onChange:j})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"tagList",placeholder:"Enter tags",value:o.tagList,onChange:j}))),r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary float-right",disabled:f},"Publish Article")))))};a(52);var R=function(){return r.a.createElement(p,null,r.a.createElement(f.Consumer,null,(function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(E,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/"},r.a.createElement(L,null)),r.a.createElement(l.b,{exact:!0,path:"/home"},r.a.createElement(L,null)),r.a.createElement(l.b,{exact:!0,path:"/article/:slug"},r.a.createElement(U,null)),r.a.createElement(l.b,{exact:!0,path:"/login"},r.a.createElement(F,null)),r.a.createElement(l.b,{exact:!0,path:"/register"},r.a.createElement(M,null)),r.a.createElement(l.b,{exact:!0,path:"/user/:username"},r.a.createElement(D,null)),r.a.createElement(l.b,{exact:!0,path:"/settings"},r.a.createElement(z,null)),r.a.createElement(b,{path:"/editor",isLoggedIn:e.isLoggedIn,component:Y}),r.a.createElement(b,{path:"/editor/:slug",isLoggedIn:e.isLoggedIn,component:J}),r.a.createElement(l.b,{component:L})))})))},G=Object(o.a)();s.a.render(r.a.createElement(l.c,{history:G},r.a.createElement(R,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.44f96764.chunk.js.map