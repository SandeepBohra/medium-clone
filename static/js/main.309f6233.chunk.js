(this["webpackJsonpmedium-clone"]=this["webpackJsonpmedium-clone"]||[]).push([[0],{22:function(e,a,t){e.exports=t(42)},33:function(e,a,t){},36:function(e,a,t){},37:function(e,a,t){},38:function(e,a,t){},39:function(e,a,t){},40:function(e,a,t){},41:function(e,a,t){},42:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(19),s=t.n(c),l=t(4),m=t(7),o=(t(27),t(2)),i=Object(m.a)(),u=Object(n.createContext)({isLoggedIn:!1,logOut:function(){}}),d=function(e){var a=Object(n.useState)(localStorage.getItem("token")),t=Object(o.a)(a,2),c=t[0],s=t[1],l=Object(n.useState)(!1),m=Object(o.a)(l,2),d=m[0],b=m[1],p=Object(n.useState)(""),E=Object(o.a)(p,2),f=E[0],v=E[1],j=function(e){e&&(b(!0),s(e),localStorage.setItem("token",e))};Object(n.useEffect)((function(){localStorage.getItem("token")&&j(localStorage.getItem("token"))}),[c]);var N={isLoggedIn:d,logout:function(){b(!1),localStorage.removeItem("token"),i.push("/")},setAuth:j,user:f,setUser:v};return r.a.createElement(u.Provider,{value:N},e.children)},b=function(e){return e.isLoggedIn?r.a.createElement(l.b,e):r.a.createElement(l.a,{to:"/login"})},p=t(3),E=(t(33),function(){var e=Object(n.useContext)(u),a=e.isLoggedIn,t=e.logout,c=e.userName;return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement(p.a,{className:"navbar-brand",to:"/"},"Medium Clone"),r.a.createElement("div",null,a?r.a.createElement("ul",{className:"nav navbar-nav pull-right",style:{display:"inherit"}},r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(p.a,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(p.a,{className:"nav-link",to:"/login"},"Account Settings")),r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(p.a,{className:"nav-link",to:"/register"},"New Article")),r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(p.a,{className:"nav-link",to:"/user/".concat(c)},c)),r.a.createElement("li",{className:"nav-item d-inline-block items",onClick:t},r.a.createElement(p.a,{className:"nav-link",to:"/home"},"Log Out"))):r.a.createElement("ul",{className:"nav navbar-nav pull-right",style:{display:"inherit"}},r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(p.a,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(p.a,{className:"nav-link",to:"/login"},"Sign in")),r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(p.a,{className:"nav-link",to:"/register"},"Sign up"))))))}),f=t(10),v=t.n(f),j=t(11),N=t(21),g=t.n(N),O=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,h="https://conduit.productionready.io/api/articles?limit=10&offset=0",k=(t(36),function(){var e=Object(n.useContext)(u).isLoggedIn,a=Object(l.g)(),t=Object(n.useState)(h),c=Object(o.a)(t,2),s=c[0],m=c[1],i=new URL(s),d=Object(n.useState)(null),b=Object(o.a)(d,2),E=b[0],f=b[1],N=Object(n.useState)(null),O=Object(o.a)(N,2),k=(O[0],O[1]),x=Object(n.useState)(null),y=Object(o.a)(x,2),w=y[0],S=y[1],C=Object(n.useState)("all"),P=Object(o.a)(C,2),I=P[0],A=P[1],L=Object(n.useState)(null),U=Object(o.a)(L,2),F=U[0],T=U[1],M=Object(n.useState)(null),D=Object(o.a)(M,2),J=(D[0],D[1]),R=function(){e||a.push("/login?destination="+window.location.pathname)};return Object(n.useEffect)((function(){var e=function(){var e=Object(j.a)(v.a.mark((function e(){var a,t,n,r,c,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h);case 2:if((a=e.sent).ok){e.next=11;break}return e.next=6,a.json();case 6:t=e.sent,n=t.errors,J(n),e.next=18;break;case 11:return e.next=13,a.json();case 13:r=e.sent,c=r.articles,s=r.articlesCount,f(c),k(s);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(j.a)(v.a.mark((function e(){var a,t,n,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://conduit.productionready.io/api/tags");case 2:if((a=e.sent).ok){e.next=11;break}return e.next=6,a.json();case 6:t=e.sent,n=t.errors,J(n),e.next=16;break;case 11:return e.next=13,a.json();case 13:r=e.sent,c=r.tags,S(c);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),a()}),[]),Object(n.useEffect)((function(){(function(){var e=Object(j.a)(v.a.mark((function e(){var a,t,n,r,c,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(s);case 2:if((a=e.sent).ok){e.next=11;break}return e.next=6,a.json();case 6:t=e.sent,n=t.errors,J(n),e.next=18;break;case 11:return e.next=13,a.json();case 13:r=e.sent,c=r.articles,l=r.articlesCount,f(c),k(l);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]),r.a.createElement("div",{className:"home text-center"},r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"py-3"},"Medium Clone"),r.a.createElement("p",null,"Create and share awesome articles, like them, add them as favorite, comment on them..."))),r.a.createElement("div",{className:"container articles-and-tags"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"article-tabs"},r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item all-articles",onClick:function(){A("all"),T(null),f(null),i.searchParams.has("tag")&&i.searchParams.delete("tag"),m(i.href)}},r.a.createElement("button",{id:"all",className:"nav-link ".concat("all"===I?"active":""),href:"#"},"All Articles")),F&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"nav-link ".concat("tag"===I?"active":""),href:"#"},"#".concat(F)))),r.a.createElement("div",{className:"articles-list"},E&&E.map((function(e){return r.a.createElement("div",{key:e.slug,className:"article text-left"},r.a.createElement("div",{className:"article-info"},r.a.createElement(p.a,{to:"/user/".concat(e.author.username)},r.a.createElement("img",{src:"https://static.productionready.io/images/smiley-cyrus.jpg",className:"user-avatar",alt:e.author.username})),r.a.createElement("div",{className:"info"},r.a.createElement(p.a,{to:"/user/".concat(e.author.username),className:"article-author"},e.author.username),r.a.createElement("div",{className:"posted-date"},g()(e.createdAt).format("MMMM D, YYYY"))),r.a.createElement("button",{className:"float-right",onClick:R},"Favorite")),r.a.createElement(p.a,{to:"/article/".concat(e.slug)},r.a.createElement("h2",null,e.title),r.a.createElement("p",null,e.body),r.a.createElement("div",null,"read more....")))}))))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"popular-tags"},r.a.createElement("p",null,"Popular Tags"),r.a.createElement("div",{className:"tags"},w&&w.map((function(e){return r.a.createElement("div",{key:e,className:"tag",onClick:function(){return function(e){A("tag"),T(e),f(null),i.searchParams.has("tag")?i.searchParams.set("tag",e):i.searchParams.append("tag",e),m(i.href)}(e)}},e)}))))))))}),x=t(6),y=t(1),w=(t(37),r.a.memo((function(){var e=Object(n.useContext)(u),a=e.isLoggedIn,t=e.setAuth,c=e.user,s=e.setUser,m=Object(n.useState)(""),i=Object(o.a)(m,2),d=i[0],b=i[1],E=Object(n.useState)(""),f=Object(o.a)(E,2),N=f[0],g=f[1],h=Object(n.useState)({email:"",password:""}),k=Object(o.a)(h,2),w=k[0],S=k[1],C=Object(n.useState)(null),P=Object(o.a)(C,2),I=P[0],A=P[1],L=function(e){var a=e.target,t=a.name,n=a.value;"email"===t&&(n?n&&(O.test(n)?S(Object(y.a)(Object(y.a)({},w),{},Object(x.a)({},t,""))):S(Object(y.a)(Object(y.a)({},w),{},Object(x.a)({},t,"Please enter a valid email address")))):S(Object(y.a)(Object(y.a)({},w),{},Object(x.a)({},t,"Please enter your email"))),b(n)),"password"===t&&(S(n?Object(y.a)(Object(y.a)({},w),{},Object(x.a)({},t,"")):Object(y.a)(Object(y.a)({},w),{},Object(x.a)({},t,"Please enter the password"))),g(n))},U=function(){var e=Object(j.a)(v.a.mark((function e(a){var n,r,l,m,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(null),a.preventDefault(),e.next=4,fetch("https://conduit.productionready.io/api/users/login",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({user:{email:d,password:N}})});case 4:if((n=e.sent).ok){e.next=13;break}return e.next=8,n.json();case 8:r=e.sent,l=r.errors,A(l),e.next=19;break;case 13:return e.next=15,n.json();case 15:m=e.sent,o=m.user.token,t(o),s(c);case 19:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return a?r.a.createElement(l.a,{to:"/dashboard"}):r.a.createElement("div",{className:"container fluid login-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-center"},"Sign in"),r.a.createElement("div",{className:"text-center"},r.a.createElement(p.a,{to:"/register"},"Need Account?")),r.a.createElement("form",{onSubmit:U},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",value:d,onChange:L}),w.email&&r.a.createElement("div",{className:"error"},w.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",className:"form-control",value:N,onChange:L}),w.password&&r.a.createElement("div",{className:"error"},w.password)),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!(d&&N&&O.test(d))},"Sign In"),I&&Object.keys(I).map((function(e){return r.a.createElement("div",{className:"error",key:e},"".concat(e," ").concat(I[e]))}))))))}))),S=(t(38),r.a.memo((function(){var e=Object(n.useContext)(u).setAuth,a=Object(n.useState)({username:"",email:"",password:""}),t=Object(o.a)(a,2),c=t[0],s=t[1],l=Object(n.useState)({username:"",email:"",password:""}),m=Object(o.a)(l,2),i=m[0],d=m[1],b=Object(n.useState)(null),E=Object(o.a)(b,2),f=E[0],N=E[1],g=function(e){var a=e.target,t=a.name,n=a.value;"email"===t&&(n?n&&(O.test(n)?d(Object(y.a)(Object(y.a)({},i),{},Object(x.a)({},t,""))):d(Object(y.a)(Object(y.a)({},i),{},Object(x.a)({},t,"Please enter a valid email address")))):d(Object(y.a)(Object(y.a)({},i),{},Object(x.a)({},t,"Please enter your email")))),"username"===t&&d(n?Object(y.a)(Object(y.a)({},i),{},Object(x.a)({},t,"")):Object(y.a)(Object(y.a)({},i),{},Object(x.a)({},t,"Please enter your username"))),"password"===t&&d(n?Object(y.a)(Object(y.a)({},i),{},Object(x.a)({},t,"")):Object(y.a)(Object(y.a)({},i),{},Object(x.a)({},t,"Please enter the password"))),s(Object(y.a)(Object(y.a)({},c),{},Object(x.a)({},t,n)))},h=function(){var a=Object(j.a)(v.a.mark((function a(t){var n,r,s,l,m;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return N(null),t.preventDefault(),a.next=4,fetch("https://conduit.productionready.io/api/users",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({user:Object(y.a)({},c)})});case 4:if((n=a.sent).ok){a.next=14;break}return a.next=8,n.json();case 8:r=a.sent,s=r.errors,console.log(s),N(s),a.next=19;break;case 14:return a.next=16,n.json();case 16:l=a.sent,m=l.user.token,e(m);case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"container fluid register-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-center"},"Register"),r.a.createElement("div",{className:"text-center"},r.a.createElement(p.a,{to:"/login"},"Already have an account?")),r.a.createElement("form",{onSubmit:h},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"User Name"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:c.username,onChange:g}),i.username&&r.a.createElement("div",{className:"error"},i.username)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",name:"email",value:c.email,onChange:g}),i.email&&r.a.createElement("div",{className:"error"},i.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:c.password,onChange:g}),i.password&&r.a.createElement("div",{className:"error"},i.password)),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:function(){var e=c.username,a=c.email,t=c.password;if(!e||!a||!t)return!0}()},"Register"),f&&Object.keys(f).map((function(e){return r.a.createElement("div",{className:"error",key:e},"".concat(e," ").concat(f[e]))}))))))}))),C=(t(39),function(){var e=Object(l.h)().username;return console.log(e),r.a.createElement("div",{className:"user-profile"},r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},r.a.createElement("h2",{className:"text-center"},e),r.a.createElement(p.a,{to:"/user-settings"},r.a.createElement("button",{className:"btn btn-primary"},"Edit Profile Settings")))))),r.a.createElement("div",{className:"user-articles"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"})))))}),P=(t(40),function(){var e=Object(n.useContext)(u).user,a=Object(n.useState)({profilePic:e.image,username:e.username,bio:e.bio,email:e.email,password:""}),t=Object(o.a)(a,2),c=t[0],s=(t[1],Object(n.useState)(null)),l=Object(o.a)(s,2),m=l[0],i=(l[1],function(e){});return r.a.createElement("div",{className:"container fluid user-settings"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-center"},"User Settings"),r.a.createElement("form",{onSubmit:function(){}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"profilePic",placeholder:"URL of profile picture",value:c.profilePic,onChange:i})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"username",placeholder:"Username",value:c.username,onChange:i})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",name:"username",placeholder:"Short bio about you",rows:"10",value:c.bio,onChange:i})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:"form-control",name:"email",placeholder:"Email",value:c.email,onChange:i})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",name:"password",placeholder:"New Password",value:c.password,onChange:i})),r.a.createElement("button",{type:"submit",className:"btn btn-primary float-right"},"Update Settings"),m&&Object.keys(m).map((function(e){return r.a.createElement("div",{className:"error",key:e},"".concat(e," ").concat(m[e]))}))))))}),I=function(){return r.a.createElement("div",null,"Dashboard")};t(41);var A=function(){return r.a.createElement(d,null,r.a.createElement(u.Consumer,null,(function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(E,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/"},r.a.createElement(k,null)),r.a.createElement(l.b,{exact:!0,path:"/login"},r.a.createElement(w,null)),r.a.createElement(l.b,{exact:!0,path:"/register"},r.a.createElement(S,null)),r.a.createElement(l.b,{exact:!0,path:"/user/:username"},r.a.createElement(C,null)),r.a.createElement(l.b,{exact:!0,path:"/user-settings"},r.a.createElement(P,null)),r.a.createElement(b,{isLoggedIn:e.isLoggedIn,component:I})))})))},L=Object(m.a)();s.a.render(r.a.createElement(l.c,{history:L},r.a.createElement(A,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.309f6233.chunk.js.map