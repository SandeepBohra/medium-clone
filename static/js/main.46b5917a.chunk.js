(this["webpackJsonpmedium-clone"]=this["webpackJsonpmedium-clone"]||[]).push([[0],{26:function(e,t,a){e.exports=a(53)},39:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),s=a.n(c),l=a(4),o=a(9),i=(a(31),a(7)),m=a(1),u=a(24),d=a.n(u),f=Object(o.a)(),b=Object(n.createContext)({isLoggedIn:!1,logOut:function(){}}),p=function(e){var t=Object(n.useState)(localStorage.getItem("token")),a=Object(m.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(!1),o=Object(m.a)(l,2),i=o[0],u=o[1],p=Object(n.useState)(JSON.parse(localStorage.getItem("user"))),v=Object(m.a)(p,2),E=v[0],h=v[1],g=Object(n.useState)(""),j=Object(m.a)(g,2),O=j[0],N=j[1],x=function(e){if(e){u(!0),s(e),localStorage.setItem("token",e);var t=d()(e).username;N(t)}};Object(n.useEffect)((function(){localStorage.getItem("token")&&x(localStorage.getItem("token"))}),[c]);var k={isLoggedIn:i,logout:function(){u(!1),s(null),N(""),h(null),localStorage.removeItem("token"),localStorage.removeItem("user"),f.push("/home")},setAuth:x,user:E,setUser:h,username:O,setUsername:N,token:c};return r.a.createElement(b.Provider,{value:k},e.children)},v=function(e){return e.isLoggedIn?r.a.createElement(i.b,e):r.a.createElement(i.a,{to:"/login"})},E=(a(39),function(){var e=Object(n.useContext)(b),t=e.isLoggedIn,a=e.logout,c=e.user;return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement(l.b,{className:"navbar-brand",to:"/"},"Medium Clone"),r.a.createElement("div",null,t?r.a.createElement("ul",{className:"nav navbar-nav pull-right",style:{display:"inherit"}},r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(l.b,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(l.b,{className:"nav-link",to:"/editor"},r.a.createElement("i",{className:"material-icons m-icon"},"create"),"New Article")),r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(l.b,{className:"nav-link",to:"/settings"},r.a.createElement("i",{className:"material-icons m-icon"},"settings"),"Settings")),c&&c.username&&r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(l.b,{className:"nav-link",to:"/user/".concat(c.username)},r.a.createElement("i",{className:"material-icons m-icon"},"person"),c.username)),r.a.createElement("li",{className:"nav-item d-inline-block items",onClick:a},r.a.createElement(l.b,{className:"nav-link",to:"/login"},r.a.createElement("i",{className:"material-icons m-icon"},"logout"),"Log Out"))):r.a.createElement("ul",{className:"nav navbar-nav pull-right",style:{display:"inherit"}},r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(l.b,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(l.b,{className:"nav-link",to:"/login"},"Sign in")),r.a.createElement("li",{className:"nav-item d-inline-block items"},r.a.createElement(l.b,{className:"nav-link",to:"/register"},"Sign up"))))))}),h=a(3),g=a.n(h),j=a(12),O=a(5),N=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,x="https://conduit.productionready.io/api/articles/feed?limit=10&offset=0",k="https://conduit.productionready.io/api/articles",y="https://conduit.productionready.io/api/articles",w=a(16),S=a.n(w),C=(a(42),function(e){var t=e.articles,a=e.toggleFavorite;return r.a.createElement("div",{className:"articles-list"},t&&t.length?t.map((function(e){return r.a.createElement("div",{key:e.slug,className:"article text-left"},r.a.createElement("div",{className:"article-info"},r.a.createElement(l.b,{to:"/user/".concat(e.author.username)},r.a.createElement("img",{src:e.author.image,className:"user-avatar",alt:e.author.username})),r.a.createElement("div",{className:"info"},r.a.createElement(l.b,{to:"/user/".concat(e.author.username),className:"article-author"},e.author.username),r.a.createElement("div",{className:"posted-date"},S()(e.createdAt).format("MMMM D, YYYY"))),r.a.createElement("button",{className:"btn btn-sm float-right ".concat(e.favorited?"btn-success":"favorite-btn-style"),onClick:function(){return a(e.slug)}},r.a.createElement("i",{className:"material-icons m-icon fav-icon"},"favorite"),"".concat(e.favorited?"Unfavorite":"Favorite"," (").concat(e.favoritesCount,")"))),r.a.createElement(l.b,{to:"/article/".concat(e.slug)},r.a.createElement("h2",null,e.title),r.a.createElement("p",null,e.body.substr(0,100)),r.a.createElement("div",null,"Read more...."),r.a.createElement("div",{className:"article-tags text-right"},e.tagList&&e.tagList.map((function(e){return r.a.createElement("div",{key:e,className:"article-tag"},e)})))))})):null,t&&0===t.length?r.a.createElement("div",{className:"no-articles-yet"},"No Articles yet"):null)}),P=(a(43),function(e){var t=e.activePage,a=e.itemsPerPage,n=e.totalPageCount,c=e.setActivePage;return r.a.createElement("nav",null,Math.ceil(n/a)<=1?null:r.a.createElement("ul",{className:"pagination pagination-md flex-wrap"},function(){for(var e=[],s=function(a){e.push(r.a.createElement("li",{key:a,className:"page-item ".concat(t===a?"active":""),onClick:function(){return c(a)}},r.a.createElement("button",{className:"btn page-btn page-link"},a)))},l=1;l<=Math.ceil(n/a);l++)s(l);return e}()))}),L=(a(44),function(){return r.a.createElement("div",{className:"spinner-border text-primary loader",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))}),A=function(){return localStorage.getItem("token")?{"Content-Type":"application/json;charset=UTF-8",authorization:"Token ".concat(localStorage.getItem("token"))}:{}},I=(a(45),function(){var e=Object(n.useContext)(b),t=e.isLoggedIn,a=e.token,c=Object(i.g)(),s=Object(n.useState)(t?x:"".concat(k,"?limit=").concat(10,"&offset=0")),l=Object(m.a)(s,2),o=l[0],u=l[1],d=new URL(o),f=Object(n.useState)(!1),p=Object(m.a)(f,2),v=p[0],E=p[1],h=Object(n.useState)(null),N=Object(m.a)(h,2),w=N[0],S=N[1],I=Object(n.useState)(null),T=Object(m.a)(I,2),U=T[0],M=T[1],D=Object(n.useState)(null),F=Object(m.a)(D,2),Y=F[0],J=F[1],R=Object(n.useState)(1),G=Object(m.a)(R,2),W=G[0],z=G[1],H=Object(n.useState)(t?"your-articles":"all-articles"),Z=Object(m.a)(H,2),B=Z[0],$=Z[1],q=Object(n.useState)(null),K=Object(m.a)(q,2),Q=K[0],V=K[1],X=Object(n.useState)(null),_=Object(m.a)(X,2),ee=_[0],te=_[1],ae=Object(n.useState)(null),ne=Object(m.a)(ae,2),re=ne[0],ce=ne[1],se=function(){var e=Object(O.a)(g.a.mark((function e(a){var n,r,s,l,o,i,m;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="".concat(y,"/").concat(a,"/favorite"),t){e.next=5;break}c.push("/login?destination="+window.location.pathname),e.next=17;break;case 5:return r=w&&w.length&&w.filter((function(e){return e.slug===a}))[0],s=w&&w.length&&w.findIndex((function(e){return e.slug===a})),e.next=9,fetch("".concat(n),{headers:A(),method:r.favorited?"DELETE":"POST"});case 9:return l=e.sent,e.next=12,l.json();case 12:o=e.sent,i=o.article,(m=Object(j.a)(w))[s]=i,S(m);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(O.a)(g.a.mark((function e(){var t,a,n,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://conduit.productionready.io/api/tags");case 2:if(!(t=e.sent).ok){e.next=11;break}return e.next=6,t.json();case 6:a=e.sent,n=a.tags,J(n),e.next=16;break;case 11:return e.next=13,t.json();case 13:r=e.sent,c=r.errors,ce(c);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){(function(){var e=Object(O.a)(g.a.mark((function e(){var t,a,n,r,c,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(null),E(!0),te(null),e.next=5,fetch(o,{headers:A()});case 5:if(!(t=e.sent).ok){e.next=16;break}return e.next=9,t.json();case 9:a=e.sent,n=a.articles,r=a.articlesCount,S(n),M(r),e.next=21;break;case 16:return e.next=18,t.json();case 18:c=e.sent,s=c.errors,te(s);case 21:E(!1);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o,a,t,W]),r.a.createElement("div",{className:"home text-center"},r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"py-3"},"Medium Clone"),r.a.createElement("p",null,"Create and share awesome articles, like them, add them as favorite, comment on them..."))),r.a.createElement("div",{className:"container articles-and-tags"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"article-tabs"},r.a.createElement("ul",{className:"nav nav-tabs"},t&&r.a.createElement("li",{className:"nav-item all-articles",onClick:function(){$("your-articles"),V(null),S(null),u(x)}},r.a.createElement("button",{id:"all",className:"nav-link ".concat(t&&"your-articles"===B?"active":"")},"Your Articles")),r.a.createElement("li",{className:"nav-item all-articles",onClick:function(){$("all-articles"),V(null),S(null),u("".concat(k,"?limit=").concat(10,"&offset=0"))}},r.a.createElement("button",{id:"all",className:"nav-link ".concat("all-articles"===B?"active":"")},"All Articles")),Q&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"nav-link ".concat("tag-articles"===B?"active":"")},"#".concat(Q)))),r.a.createElement("div",{className:"articles-list"},!v&&w&&w.length?r.a.createElement(C,{articles:w,toggleFavorite:se,totalArticles:U}):null,!v&&r.a.createElement(P,{itemsPerPage:10,totalPageCount:U,activePage:W,setActivePage:function(e){d.searchParams.set("offset",10*(e-1)),u(d.href),z(e)}}),v&&r.a.createElement(L,null),ee&&Object.keys(ee).map((function(e){return r.a.createElement("div",{className:"error",key:e},"".concat(e," ").concat(ee[e]))}))),w&&0===w.length?r.a.createElement("div",{className:"no-articles-yet"},"No Articles yet."):null)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"popular-tags"},r.a.createElement("p",null,"Popular Tags"),r.a.createElement("div",{className:"tags"},Y&&Y.map((function(e){return r.a.createElement("div",{key:e,className:"tag",onClick:function(){return function(e){$("tag-articles"),V(e),S(null),d.searchParams.has("tag")?d.searchParams.set("tag",e):d.searchParams.append("tag",e),u(d.href)}(e)}},e)})),re&&Object.keys(re).map((function(e){return r.a.createElement("div",{className:"error",key:e},"".concat(e," ").concat(re[e]))}))))))))}),T=a(2),U=(a(46),function(){var e=Object(i.g)(),t=Object(i.h)().slug,a=Object(n.useContext)(b),c=a.isLoggedIn,s=a.username,o="".concat(y,"/").concat(t),u=Object(n.useState)(null),d=Object(m.a)(u,2),f=d[0],p=d[1],v=Object(n.useState)(null),E=Object(m.a)(v,2),h=E[0],N=E[1],x=Object(n.useState)(""),k=Object(m.a)(x,2),w=k[0],C=k[1],P=function(){var t=Object(O.a)(g.a.mark((function t(){var a,n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=4;break}e.push("/login?destination="+window.location.pathname),t.next=20;break;case 4:if(a=null,!f.favorited){t.next=11;break}return t.next=8,fetch("".concat(o,"/favorite"),{headers:A(),method:"DELETE"});case 8:a=t.sent,t.next=14;break;case 11:return t.next=13,fetch("".concat(o,"/favorite"),{headers:A(),method:"POST"});case 13:a=t.sent;case 14:if(!a.ok){t.next=20;break}return t.next=17,a.json();case 17:n=t.sent,r=n.article,p(Object(T.a)(Object(T.a)({},f),r));case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=Object(O.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(o,{headers:A(),method:"DELETE"});case 2:t.sent.ok&&e.push("/");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var e=Object(O.a)(g.a.mark((function e(t){var a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!w){e.next=12;break}return e.next=4,fetch("".concat(o,"/comments"),{method:"POST",headers:A(),body:JSON.stringify({comment:{body:w}})});case 4:if(!(a=e.sent).ok){e.next=11;break}return e.next=8,a.json();case 8:n=e.sent,(r=n.comment)&&N([r].concat(Object(j.a)(h)));case 11:C("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(O.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/comments/").concat(t),{method:"DELETE",headers:A()});case 2:e.sent.ok&&(a=h.filter((function(e){return e.id!==t})),N(Object(j.a)(a)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=function(){var e=Object(O.a)(g.a.mark((function e(){var t,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(o,{method:"GET",headers:A()});case 2:if((t=e.sent).ok){e.next=6;break}e.next=11;break;case 6:return e.next=8,t.json();case 8:a=e.sent,n=a.article,p(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(O.a)(g.a.mark((function e(){var t,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/comments"),{method:"GET",headers:A()});case 2:if((t=e.sent).ok){e.next=6;break}e.next=11;break;case 6:return e.next=8,t.json();case 8:a=e.sent,n=a.comments,N(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[o]);var M=function(){return r.a.createElement("div",{className:"article-info"},r.a.createElement(l.b,{to:"/user/".concat(f.author.username)},r.a.createElement("img",{src:f.author.image,className:"user-avatar",alt:f.author.username})),r.a.createElement("div",{className:"info"},r.a.createElement(l.b,{to:"/user/".concat(f.author.username),className:"article-author"},f.author.username),r.a.createElement("div",{className:"posted-date"},S()(f.createdAt).format("MMMM D, YYYY"))),s!==f.author.username&&r.a.createElement("button",{className:"btn btn-sm ".concat(f.favorited?"btn-success":"favorite-btn-style"),onClick:P},f.favorited?"Unfavorite Article (".concat(f.favoritesCount,")"):"Favorite Article (".concat(f.favoritesCount,")")),c&&s===f.author.username&&r.a.createElement("span",{className:"can-edit-delete"},r.a.createElement(l.b,{to:"/editor/".concat(t)},r.a.createElement("button",{className:"btn btn-sm edit-btn"},r.a.createElement("i",{className:"material-icons m-icon"},"edit"),"Edit Article")),r.a.createElement("button",{className:"btn btn-sm delete-btn",onClick:function(){return L()}},r.a.createElement("i",{className:"material-icons m-icon"},"delete"),"Delete Article")))};return r.a.createElement("div",{className:"article-page"},r.a.createElement("div",{className:"article-banner"},f&&r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,f.title),M())),f&&r.a.createElement("div",{className:"container article-detail"},r.a.createElement("div",{className:"article-content"},r.a.createElement("p",null,f.body),r.a.createElement("div",{className:"article-content-tags"},f.tagList&&f.tagList.map((function(e){return r.a.createElement("div",{key:e,className:"article-content-tag"},e)}))))),r.a.createElement("hr",{className:"hr-line"}),f&&r.a.createElement("div",{className:"article-actions"},M()),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row comment-section"},r.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},c?r.a.createElement("div",{className:"comment-form"},r.a.createElement("form",{onSubmit:I},r.a.createElement("div",{className:"content"},r.a.createElement("textarea",{rows:"3",value:w,onChange:function(e){return C(e.target.value)}})),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{className:"btn btn-sm btn-primary float-right"},"Post Comment")))):r.a.createElement("div",{className:"not-logged-in"},r.a.createElement("p",null,r.a.createElement(l.b,{to:"/login"},"Sign In")," or ",r.a.createElement(l.b,{to:"/register"},"Sign up")," to add comments on this article.")),h&&h.map((function(e){return r.a.createElement("div",{key:e.id,className:"comment"},r.a.createElement("div",{className:"comment-content"},r.a.createElement("p",null,e.body)),r.a.createElement("div",{className:"comment-footer"},r.a.createElement("div",{className:"comment-meta"},r.a.createElement(l.b,{to:"/user/".concat(e.author.username)},r.a.createElement("img",{src:e.author.image,alt:e.author.username}),e.author.username),r.a.createElement("span",null,S()(e.author.createdAt).format("MMMM D, YYYY")),r.a.createElement("i",{className:"glyphicon glyphicon-remove"}),c&&s===e.author.username&&r.a.createElement("span",{className:"float-right"},r.a.createElement("i",{className:"material-icons delete-icon",onClick:function(){return U(e.id)}},"delete")))))}))))))}),M=a(6),D=(a(47),r.a.memo((function(){var e=Object(n.useContext)(b),t=e.isLoggedIn,a=e.setAuth,c=e.setUser,s=Object(n.useState)(""),o=Object(m.a)(s,2),u=o[0],d=o[1],f=Object(n.useState)(""),p=Object(m.a)(f,2),v=p[0],E=p[1],h=Object(n.useState)({email:"",password:""}),j=Object(m.a)(h,2),x=j[0],k=j[1],y=Object(n.useState)(null),w=Object(m.a)(y,2),S=w[0],C=w[1],P=function(e){var t=e.target,a=t.name,n=t.value;"email"===a&&(n?n&&(N.test(n)?k(Object(T.a)(Object(T.a)({},x),{},Object(M.a)({},a,""))):k(Object(T.a)(Object(T.a)({},x),{},Object(M.a)({},a,"Please enter a valid email address")))):k(Object(T.a)(Object(T.a)({},x),{},Object(M.a)({},a,"Please enter your email"))),d(n)),"password"===a&&(k(n?Object(T.a)(Object(T.a)({},x),{},Object(M.a)({},a,"")):Object(T.a)(Object(T.a)({},x),{},Object(M.a)({},a,"Please enter the password"))),E(n))},L=function(){var e=Object(O.a)(g.a.mark((function e(t){var n,r,s,l,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(null),t.preventDefault(),e.next=4,fetch("https://conduit.productionready.io/api/users/login",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({user:{email:u,password:v}})});case 4:if((n=e.sent).ok){e.next=13;break}return e.next=8,n.json();case 8:r=e.sent,s=r.errors,C(s),e.next=20;break;case 13:return e.next=15,n.json();case 15:l=e.sent,o=l.user,a(o.token),c(o),localStorage.setItem("user",JSON.stringify(o));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?r.a.createElement(i.a,{to:"/"}):r.a.createElement("div",{className:"container fluid login-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-center"},"Sign in"),r.a.createElement("div",{className:"text-center"},r.a.createElement(l.b,{to:"/register"},"Need Account?")),r.a.createElement("form",{onSubmit:L},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",value:u,onChange:P}),x.email&&r.a.createElement("div",{className:"error"},x.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",className:"form-control",value:v,onChange:P}),x.password&&r.a.createElement("div",{className:"error"},x.password)),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!(u&&v&&N.test(u))},"Sign In"),S&&Object.keys(S).map((function(e){return r.a.createElement("div",{className:"error",key:e},"".concat(e," ").concat(S[e]))}))))))}))),F=(a(48),r.a.memo((function(){var e=Object(n.useContext)(b),t=e.setAuth,a=e.setUser,c=e.isLoggedIn,s=Object(n.useState)({username:"",email:"",password:""}),o=Object(m.a)(s,2),u=o[0],d=o[1],f=Object(n.useState)({username:"",email:"",password:""}),p=Object(m.a)(f,2),v=p[0],E=p[1],h=Object(n.useState)(null),j=Object(m.a)(h,2),x=j[0],k=j[1],y=function(e){var t=e.target,a=t.name,n=t.value;"email"===a&&(n?n&&(N.test(n)?E(Object(T.a)(Object(T.a)({},v),{},Object(M.a)({},a,""))):E(Object(T.a)(Object(T.a)({},v),{},Object(M.a)({},a,"Please enter a valid email address")))):E(Object(T.a)(Object(T.a)({},v),{},Object(M.a)({},a,"Please enter your email")))),"username"===a&&E(n?Object(T.a)(Object(T.a)({},v),{},Object(M.a)({},a,"")):Object(T.a)(Object(T.a)({},v),{},Object(M.a)({},a,"Please enter your username"))),"password"===a&&E(n?Object(T.a)(Object(T.a)({},v),{},Object(M.a)({},a,"")):Object(T.a)(Object(T.a)({},v),{},Object(M.a)({},a,"Please enter the password"))),d(Object(T.a)(Object(T.a)({},u),{},Object(M.a)({},a,n)))},w=function(){var e=Object(O.a)(g.a.mark((function e(n){var r,c,s,l,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(null),n.preventDefault(),e.next=4,fetch("https://conduit.productionready.io/api/users",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({user:Object(T.a)({},u)})});case 4:if((r=e.sent).ok){e.next=14;break}return e.next=8,r.json();case 8:c=e.sent,s=c.errors,console.log(s),k(s),e.next=21;break;case 14:return e.next=16,r.json();case 16:l=e.sent,o=l.user,t(o.token),a(o),localStorage.setItem("user",JSON.stringify(o));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c?r.a.createElement(i.a,{to:"/"}):r.a.createElement("div",{className:"container fluid register-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-center"},"Register"),r.a.createElement("div",{className:"text-center"},r.a.createElement(l.b,{to:"/login"},"Already have an account?")),r.a.createElement("form",{onSubmit:w},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"User Name"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:u.username,onChange:y}),v.username&&r.a.createElement("div",{className:"error"},v.username)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",name:"email",value:u.email,onChange:y}),v.email&&r.a.createElement("div",{className:"error"},v.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:u.password,onChange:y}),v.password&&r.a.createElement("div",{className:"error"},v.password)),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:function(){var e=u.username,t=u.email,a=u.password;if(!e||!t||!a)return!0}()},"Register"),x&&Object.keys(x).map((function(e){return r.a.createElement("div",{className:"error",key:e},"".concat(e," ").concat(x[e]))}))))))}))),Y=(a(49),function(){var e=Object(i.h)().username,t=Object(i.g)(),a=Object(n.useContext)(b),c=a.isLoggedIn,s=a.token,l=Object(n.useState)("".concat(k,"?author=").concat(e,"&limit=").concat(5,"&offset=0")),o=Object(m.a)(l,2),u=o[0],d=o[1],f=new URL(u),p=Object(n.useState)(null),v=Object(m.a)(p,2),E=v[0],h=v[1],N=Object(n.useState)(!1),x=Object(m.a)(N,2),w=x[0],S=x[1],I=Object(n.useState)(null),T=Object(m.a)(I,2),U=T[0],M=T[1],D=Object(n.useState)(null),F=Object(m.a)(D,2),Y=F[0],J=F[1],R=Object(n.useState)("my-articles"),G=Object(m.a)(R,2),W=G[0],z=G[1],H=Object(n.useState)(1),Z=Object(m.a)(H,2),B=Z[0],$=Z[1],q=function(e){z(e)},K=function(){var e=Object(O.a)(g.a.mark((function e(a){var n,r,s,l,o,i,m;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="".concat(y,"/").concat(a,"/favorite"),c){e.next=5;break}t.push("/login?destination="+window.location.pathname),e.next=17;break;case 5:return r=U&&U.length&&U.filter((function(e){return e.slug===a}))[0],s=U&&U.length&&U.findIndex((function(e){return e.slug===a})),e.next=9,fetch("".concat(n),{headers:A(),method:r.favorited?"DELETE":"POST"});case 9:return l=e.sent,e.next=12,l.json();case 12:o=e.sent,i=o.article,(m=Object(j.a)(U))[s]=i,M(m);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){"my-articles"===W&&d("".concat(k,"?author=").concat(e,"&limit=10")),"fav-articles"===W&&d("".concat(k,"?favorited=").concat(e,"&limit=10"))}),[e,W]),Object(n.useEffect)((function(){(function(){var t=Object(O.a)(g.a.mark((function t(){var a,n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return M(null),t.next=3,fetch("".concat("https://conduit.productionready.io/api/profiles/","/").concat(e));case 3:if(!(a=t.sent).ok){t.next=10;break}return t.next=7,a.json();case 7:n=t.sent,r=n.profile,h(r);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(n.useEffect)((function(){(function(){var e=Object(O.a)(g.a.mark((function e(){var t,a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(null),S(!0),e.next=4,fetch(u,{method:"GET",headers:A()});case 4:if(!(t=e.sent).ok){e.next=13;break}return e.next=8,t.json();case 8:a=e.sent,n=a.articles,r=a.articlesCount,M(n),J(r);case 13:S(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[u,c,s]),r.a.createElement("div",{className:"user-profile"},E&&r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},r.a.createElement("img",{src:E.image,alt:E.image}),r.a.createElement("h3",{className:"text-center mt-3"},e))))),r.a.createElement("div",{className:"user-articles"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},r.a.createElement("div",{className:"article-tabs"},r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item all-articles",onClick:function(){return q("my-articles")}},r.a.createElement("button",{id:"all",className:"nav-link ".concat("my-articles"===W?"active":"")},"My Articles")),r.a.createElement("li",{className:"nav-item fav-articles",onClick:function(){return q("fav-articles")}},r.a.createElement("button",{id:"all",className:"nav-link ".concat("fav-articles"===W?"active":"")},"Favorite Articles"))),r.a.createElement("div",{className:"articles-list text-center"},w&&r.a.createElement(L,null),r.a.createElement(C,{articles:U,toggleFavorite:K,totalArticles:Y}),!w&&r.a.createElement(P,{itemsPerPage:5,totalPageCount:Y,activePage:B,setActivePage:function(e){f.searchParams.set("offset",5*(e-1)),d(f.href),$(e)}}))))))))}),J=(a(50),function(){var e=Object(i.g)(),t=Object(n.useContext)(b),a=t.user,c=t.setAuth,s=t.setUser,l=Object(n.useState)({image:a.image,username:a.username,bio:a.bio,email:a.email,password:""}),o=Object(m.a)(l,2),u=o[0],d=o[1],f=Object(n.useState)(null),p=Object(m.a)(f,2),v=p[0],E=p[1],h=Object(n.useState)(!1),j=Object(m.a)(h,2),N=j[0],x=j[1],k=function(e){var t=e.target,a=t.name,n=t.value;d(Object(T.a)(Object(T.a)({},u),{},Object(M.a)({},a,n)))},y=function(){var t=Object(O.a)(g.a.mark((function t(a){var n,r,l,o,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),x(!0),t.next=4,fetch("https://conduit.productionready.io/api/user",{method:"PUT",headers:A(),body:JSON.stringify(Object(T.a)({},u))});case 4:if((n=t.sent).ok){t.next=13;break}return t.next=8,n.json();case 8:r=t.sent,l=r.errors,E(l),t.next=21;break;case 13:return t.next=15,n.json();case 15:o=t.sent,i=o.user,c(i.token),s(i),localStorage.setItem("user",JSON.stringify(i)),e.push("/");case 21:x(!1);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"container fluid user-settings"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-center"},"User Settings"),r.a.createElement("form",{onSubmit:y},r.a.createElement("fieldset",{disabled:N},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"profilePic",placeholder:"URL of profile picture",value:u.image,onChange:k})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"username",placeholder:"Username",value:u.username,onChange:k})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",name:"username",placeholder:"Short bio about you",rows:"10",value:u.bio,onChange:k})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:"form-control",name:"email",placeholder:"Email",value:u.email,onChange:k})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",name:"password",placeholder:"New Password",value:u.password,onChange:k})),r.a.createElement("button",{type:"submit",className:"btn btn-primary float-right"},N?"updating...":"Update Settings")),v&&Object.keys(v).map((function(e){return r.a.createElement("div",{className:"error",key:e},"".concat(e," ").concat(v[e]))}))))))}),R=(a(51),function(){var e=Object(i.g)(),t=Object(n.useState)({title:"",description:"",body:"",tagList:""}),a=Object(m.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(!1),o=Object(m.a)(l,2),u=o[0],d=o[1],f=Object(n.useState)(null),b=Object(m.a)(f,2),p=b[0],v=b[1],E=function(e){var t=e.target,a=t.name,n=t.value;s(Object(T.a)(Object(T.a)({},c),{},Object(M.a)({},a,n)))},h=function(){var t=Object(O.a)(g.a.mark((function t(a){var n,r,s,l,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),v(null),d(!0),t.next=5,fetch(y,{method:"POST",headers:A(),body:JSON.stringify(Object(T.a)(Object(T.a)({},c),{},{tagList:c.tagList.split(",")}))});case 5:if((n=t.sent).ok){t.next=14;break}return t.next=9,n.json();case 9:r=t.sent,s=r.errors,v(s),t.next=19;break;case 14:return t.next=16,n.json();case 16:l=t.sent,(o=l.article).slug&&e.push("/article/".concat(o.slug));case 19:d(!1);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"container new-article"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},r.a.createElement("ul",null,p&&Object.keys(p).map((function(e){return r.a.createElement("li",{className:"error",key:e},p[e].map((function(t){return r.a.createElement("div",{key:t,className:"error"},"".concat(e," ").concat(t))})))}))),r.a.createElement("form",{onSubmit:h},r.a.createElement("fieldset",{disabled:u},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"title",placeholder:"Article Title",value:c.title,onChange:E})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"description",placeholder:"What's this article about?",value:c.description,onChange:E})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",name:"body",placeholder:"Write your article (in markdown)",rows:"10",value:c.body,onChange:E})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"tagList",placeholder:"Enter tags",value:c.tagList,onChange:E}))),r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary float-right",disabled:u},"Publish Article")))))}),G=function(){var e=Object(i.g)(),t=Object(i.h)().slug,a="".concat(y,"/").concat(t),c=Object(n.useState)({title:"",description:"",body:"",tagList:""}),s=Object(m.a)(c,2),l=s[0],o=s[1],u=Object(n.useState)(!1),d=Object(m.a)(u,2),f=d[0],b=d[1],p=Object(n.useState)(null),v=Object(m.a)(p,2),E=v[0],h=v[1],j=function(e){var t=e.target,a=t.name,n=t.value;o(Object(T.a)(Object(T.a)({},l),{},Object(M.a)({},a,n)))},N=function(){var t=Object(O.a)(g.a.mark((function t(n){var r,c,s,o,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),h(null),b(!0),t.next=5,fetch(a,{method:"PUT",headers:A(),body:JSON.stringify(Object(T.a)({},l))});case 5:if((r=t.sent).ok){t.next=14;break}return t.next=9,r.json();case 9:c=t.sent,s=c.errors,h(s),t.next=19;break;case 14:return t.next=16,r.json();case 16:o=t.sent,(i=o.article).slug&&e.push("/article/".concat(i.slug));case 19:b(!1);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(O.a)(g.a.mark((function e(){var t,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a,{method:"GET",headers:A()});case 2:if((t=e.sent).ok){e.next=6;break}e.next=11;break;case 6:return e.next=8,t.json();case 8:n=e.sent,r=n.article,o((function(e){return Object(T.a)(Object(T.a)({},e),{},{title:r.title,body:r.body,description:r.description,tagList:r.tagList})}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]),r.a.createElement("div",{className:"container new-article"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},r.a.createElement("ul",null,E&&Object.keys(E).map((function(e){return r.a.createElement("li",{className:"error",key:e},E[e].map((function(t){return r.a.createElement("div",{className:"error"},"".concat(e," ").concat(t))})))}))),r.a.createElement("form",{onSubmit:N},r.a.createElement("fieldset",{disabled:f},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"title",placeholder:"Article Title",value:l.title,onChange:j})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"description",placeholder:"What's this article about?",value:l.description,onChange:j})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",name:"body",placeholder:"Write your article (in markdown)",rows:"10",value:l.body,onChange:j})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"tagList",placeholder:"Enter tags",value:l.tagList,onChange:j}))),r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary float-right",disabled:f},"Publish Article")))))};a(52);var W=function(){return r.a.createElement(p,null,r.a.createElement(b.Consumer,null,(function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(E,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/"},r.a.createElement(I,null)),r.a.createElement(i.b,{exact:!0,path:"/home"},r.a.createElement(I,null)),r.a.createElement(i.b,{exact:!0,path:"/article/:slug"},r.a.createElement(U,null)),r.a.createElement(i.b,{exact:!0,path:"/login"},r.a.createElement(D,null)),r.a.createElement(i.b,{exact:!0,path:"/register"},r.a.createElement(F,null)),r.a.createElement(i.b,{exact:!0,path:"/user/:username"},r.a.createElement(Y,null)),r.a.createElement(i.b,{exact:!0,path:"/settings"},r.a.createElement(J,null)),r.a.createElement(v,{path:"/editor/:slug",isLoggedIn:e.isLoggedIn,component:G}),r.a.createElement(v,{path:"/editor",isLoggedIn:e.isLoggedIn,component:R})))})))},z=Object(o.a)();s.a.render(r.a.createElement(l.a,{history:z},r.a.createElement(W,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.46b5917a.chunk.js.map